"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const errorService = require("./error-service");
const Q = require("q");
const app_config_1 = require("../app-config");
const error_codes_1 = require("../shared/error-codes");
function isDevelopmentMode() {
    return app_config_1.default.isDev;
}
exports.isDevelopmentMode = isDevelopmentMode;
function getAuthenticatedUser(req) {
    if (isDevelopmentMode()) {
        return Q.resolve(developerSession);
    }
    if (req.isAuthenticated()) {
        return Q.resolve(req.user);
    }
    return Q.reject(errorService.createErrorMessage(error_codes_1.default.ERROR_NOT_AUTHENTICATED));
}
exports.getAuthenticatedUser = getAuthenticatedUser;
let developerSession = {
    emailAddress: "developer@ogk.be",
    firstName: "developer",
    lastName: "developer",
    nameId: "dev",
    isAdmin: true,
    nickName: "devke"
};

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL2F1dGgtc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLGdEQUFnRDtBQUNoRCx1QkFBdUI7QUFDdkIsOENBQXNDO0FBQ3RDLHVEQUErQztBQUcvQztJQUNJLE1BQU0sQ0FBQyxvQkFBUyxDQUFDLEtBQUssQ0FBQztBQUMzQixDQUFDO0FBRkQsOENBRUM7QUFFRCw4QkFBcUMsR0FBWTtJQUM3QyxFQUFFLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0QixNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFDRCxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3hCLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBQ0QsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQWUsWUFBWSxDQUFDLGtCQUFrQixDQUFDLHFCQUFVLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDO0FBQ3ZHLENBQUM7QUFSRCxvREFRQztBQUVELElBQUksZ0JBQWdCLEdBQWlCO0lBQ2pDLFlBQVksRUFBRSxrQkFBa0I7SUFDaEMsU0FBUyxFQUFFLFdBQVc7SUFDdEIsUUFBUSxFQUFFLFdBQVc7SUFDckIsTUFBTSxFQUFFLEtBQUs7SUFDYixPQUFPLEVBQUUsSUFBSTtJQUNiLFFBQVEsRUFBRSxPQUFPO0NBQ3BCLENBQUEiLCJmaWxlIjoic2VydmljZXMvYXV0aC1zZXJ2aWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtSZXF1ZXN0fSBmcm9tIFwiZXhwcmVzcy1zZXJ2ZS1zdGF0aWMtY29yZVwiO1xyXG5pbXBvcnQgKiBhcyBlcnJvclNlcnZpY2UgZnJvbSAnLi9lcnJvci1zZXJ2aWNlJztcclxuaW1wb3J0ICogYXMgUSBmcm9tICdxJztcclxuaW1wb3J0IGFwcENvbmZpZyBmcm9tICcuLi9hcHAtY29uZmlnJztcclxuaW1wb3J0IGVycm9yQ29kZXMgZnJvbSAnLi4vc2hhcmVkL2Vycm9yLWNvZGVzJztcclxuaW1wb3J0IHsgSVVzZXJTZXNzaW9uIH0gZnJvbSBcIi4uL3NoYXJlZC9jb250cmFjdHMvdXNlci1jb250cmFjdFwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRGV2ZWxvcG1lbnRNb2RlKCkge1xyXG4gICAgcmV0dXJuIGFwcENvbmZpZy5pc0RldjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEF1dGhlbnRpY2F0ZWRVc2VyKHJlcTogUmVxdWVzdCk6IFEuUHJvbWlzZTxJVXNlclNlc3Npb24+e1xyXG4gICAgaWYgKGlzRGV2ZWxvcG1lbnRNb2RlKCkpIHtcclxuICAgICAgICByZXR1cm4gUS5yZXNvbHZlKGRldmVsb3BlclNlc3Npb24pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xyXG4gICAgICAgIHJldHVybiBRLnJlc29sdmUocmVxLnVzZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFEucmVqZWN0PElVc2VyU2Vzc2lvbj4oZXJyb3JTZXJ2aWNlLmNyZWF0ZUVycm9yTWVzc2FnZShlcnJvckNvZGVzLkVSUk9SX05PVF9BVVRIRU5USUNBVEVEKSk7XHJcbn1cclxuXHJcbmxldCBkZXZlbG9wZXJTZXNzaW9uOiBJVXNlclNlc3Npb24gPSB7XHJcbiAgICBlbWFpbEFkZHJlc3M6IFwiZGV2ZWxvcGVyQG9nay5iZVwiLFxyXG4gICAgZmlyc3ROYW1lOiBcImRldmVsb3BlclwiLFxyXG4gICAgbGFzdE5hbWU6IFwiZGV2ZWxvcGVyXCIsXHJcbiAgICBuYW1lSWQ6IFwiZGV2XCIsXHJcbiAgICBpc0FkbWluOiB0cnVlLFxyXG4gICAgbmlja05hbWU6IFwiZGV2a2VcIlxyXG59Il0sInNvdXJjZVJvb3QiOiIuLiJ9
